<div class="main-full-component">
  <div class="main-container">
    <h1 style="text-align: center">Mes Groupes</h1>
  </div>
  <div class="main-container">
    <mat-accordion multi="true">
      <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Créer un groupe
          </mat-panel-title>
          <mat-panel-description>
            Création d'un nouveau groupe
          </mat-panel-description>
        </mat-expansion-panel-header>

        <ng-template matExpansionPanelContent>
          <div>
            <form #groupForm="ngForm" (ngSubmit)="createGroup()" class="form-row" style="padding: 15px; margin: 15px 0">
              <mat-form-field style="width: 33%">
                <input matInput placeholder="Nom" [(ngModel)]="name" name="name" required>
              </mat-form-field>

              <mat-form-field style="width: 100%">
                <mat-chip-list #userList>
                  <mat-chip *ngFor="let user of selectedUsers"
                            [selectable]="selectable"
                            [removable]="removable"
                            (removed)="removeUser(user)">
                    {{user}}
                    <mat-icon matChipRemove *ngIf="removable">x</mat-icon>
                  </mat-chip>
                  <input placeholder="Nouvel utilisateur"
                         [matChipInputFor]="userList"
                         [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                         [matChipInputAddOnBlur]="addOnBlur"
                         (matChipInputTokenEnd)="addUser($event)">
                </mat-chip-list>
              </mat-form-field>
              <div>
                <button [disabled]="groupForm.valid === false || selectedUsers.length < 1" mat-raised-button class="btn-secondary" type="submit">Créer</button>
              </div>
            </form>
          </div>
        </ng-template>
      </mat-expansion-panel>
      <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Vos groupes
          </mat-panel-title>
          <mat-panel-description>
            Liste des groupes auxquels vous appartenez
          </mat-panel-description>
        </mat-expansion-panel-header>
        <ng-template matExpansionPanelContent>
          <div *ngIf="userGroups?.length > 0, else empty">
            <div class="group" *ngFor="let group of userGroups" (click)="goToGroup(group)">
              <i class="fas fa-universal-access"></i> {{group.name}}
            </div>
          </div>
          <ng-template #empty>
            <p style="text-align: center">Vous n'appartenez à aucun groupe</p>
          </ng-template>
        </ng-template>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>
